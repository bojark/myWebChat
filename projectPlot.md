# Схема приложения

## Подприложение: Сервер
1. Запускается, считывает данные порта из settings.txt и слушает соединения в отдельном треде.
2. Запуск и новые сообщения логгирует с помощью **логгера** (синхронизированный объект класса Logger).
3. Регистрирует входящие соедниения и заводит отдельный поток для каждого.
4. В потоке соединения добавляет соединение в потокобезопасный список через добавление с ожиданием (put - ?), там же слушает входящие **сообщения**, которые передаются в формате JSON.
5. В потоке соедниения пересылает нераспарщенное сообщение по каждому соединению.
6. Тред соедениния терминируется при получении сообщения о выходе. 
7. Парсит полученное в объект класса **Message** и пишет в логгер данные из него (либо делает это напрямую из JSON, подумать).
8. При входящем сообщении вызывает **логгер** и шлёт сообщение по каждому соединению.

## Подприложение: Клиент
1. Запускается, берёт данные (порт подключения, имя по-умолчанию) из файла settings.txt. О запуске пишет в **логгер**.
2. В отдельном треде слушает ввод данных пользователем.
3. Предлагает задать имя пользователя по команде set_nickname. Значение присваивает отдельному полю.
4. В случае успешного подключения (флаг "подключено" true, по умолчанию -- false) напечатанное в косноль должно формировать описание объекта **Massage** в формате JSON
4. По команде connect в отдельном треде пытается подключиться к серверу. Об успехе или провале пишет в **логгер**. Отмечает флаг "подключено" при успешном подключении.
5. В том же треде из прошлого пункта слушает сервер. Сообщения выводит в консоль и логгирует **логгером**.
6. По команде /exit сообщает серверу об отключении пользователя, пишет в логгер и терминирует все потоки. 

## Подприложение: Логгер
1. Подгружает файл log.txt
2. Принимает сообщения через функцию, пишет сообщения в файл, дополняя его (не стирая!)
3. Позволяет читать лог в консоль (не обязательно).

## Вспомогательный класс Message
Служит для хранения данных сообщения. Содержит стринговые поля дата, имя отправителя, сообщение. Возможно, это будет виртуальная сущность, только в форме JSON-описания, возможно, класс нужен будет для работы парсера. 
Возможно, также стоит сделать поля для служебных сигналов, например, о закрытии соединения.

## Вспомогательный класс FileReader
Нужен для чтения данных из файла settings.txt.


![][scheme]

[scheme]: projectScheme.png